From 93359bc488134d8f06046ae44a348f2cf1ff32b8 Mon Sep 17 00:00:00 2001
From: Kyle Harrison <khwebmail@gmail.com>
Date: Sun, 10 Oct 2021 11:01:24 +0100
Subject: [PATCH] HWC HAXX

Change-Id: I04c2c82dfb9c26b5f3024cfe3deb19aa90238b9c
---
 libhwcomposer/Android.mk          | 3 ++-
 libhwcomposer/hwc_dump_layers.cpp | 6 ++++--
 2 files changed, 6 insertions(+), 3 deletions(-)

diff --git a/libhwcomposer/Android.mk b/libhwcomposer/Android.mk
index 8f1c29e..4cd7948 100644
--- a/libhwcomposer/Android.mk
+++ b/libhwcomposer/Android.mk
@@ -23,7 +23,8 @@ LOCAL_CFLAGS                  := $(common_flags) -DLOG_TAG=\"qdhwcomposer\" -Wno
                                  -Wno-float-conversion -Wno-unused-parameter
 
 ifeq ($(TARGET_USES_QCOM_BSP),true)
-LOCAL_SHARED_LIBRARIES += libhwui
+#LOCAL_STATIC_LIBRARIES += libhwui_static libwebp-encode libwebp-decode
+#LOCAL_SHARED_LIBRARIES += libdng_sdk libpng libjpeg libft2 libGLESv2 libpiex libnativewindow libheif
 ifeq ($(GET_FRAMEBUFFER_FORMAT_FROM_HWC),true)
     LOCAL_CFLAGS += -DGET_FRAMEBUFFER_FORMAT_FROM_HWC
 endif
diff --git a/libhwcomposer/hwc_dump_layers.cpp b/libhwcomposer/hwc_dump_layers.cpp
index c18aefc..220c7ae 100644
--- a/libhwcomposer/hwc_dump_layers.cpp
+++ b/libhwcomposer/hwc_dump_layers.cpp
@@ -41,8 +41,8 @@
 #pragma GCC diagnostic push
 #pragma GCC diagnostic ignored "-Wconversion"
 #pragma GCC diagnostic ignored "-Wfloat-conversion"
-#include <SkBitmap.h>
-#include <SkImageEncoder.h>
+//#include <SkBitmap.h>
+//#include <SkImageEncoder.h>
 #pragma GCC diagnostic pop
 #endif
 #ifdef STDC_FORMAT_MACROS
@@ -315,6 +315,7 @@ void HwcDebug::dumpLayer(size_t layerIndex, hwc_layer_1_t hwLayers[])
     }
 
     getHalPixelFormatStr(hnd->format, pixFormatStr, sizeof(pixFormatStr));
+/*
 #ifdef QTI_BSP
     if (needDumpPng && hnd->base) {
         bool bResult = false;
@@ -359,6 +360,7 @@ void HwcDebug::dumpLayer(size_t layerIndex, hwc_layer_1_t hwLayers[])
         }
     }
 #endif
+*/
     if (needDumpRaw && hnd->base) {
         char dumpFilename[PATH_MAX];
         bool bResult = false;
-- 
2.33.0

