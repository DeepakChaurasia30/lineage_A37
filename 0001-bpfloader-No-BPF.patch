From 68f1ccd76c3024aa5c8bec868d55d255ba529caa Mon Sep 17 00:00:00 2001
From: Kyle Harrison <khwebmail@gmail.com>
Date: Sun, 10 Oct 2021 20:55:23 +0100
Subject: [PATCH] bpfloader: No BPF

Change-Id: I92ca258242e0d4d1dba435a32e3adafb7386ab98
---
 bpfloader/Android.bp    | 1 +
 bpfloader/BpfLoader.cpp | 3 ++-
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/bpfloader/Android.bp b/bpfloader/Android.bp
index 7e7139f..e58fdcc 100644
--- a/bpfloader/Android.bp
+++ b/bpfloader/Android.bp
@@ -33,6 +33,7 @@ cc_binary {
         "-Wall",
         "-Werror",
         "-Wthread-safety",
+        "-Wno-unused-variable",
     ],
     sanitize: {
         integer_overflow: true,
diff --git a/bpfloader/BpfLoader.cpp b/bpfloader/BpfLoader.cpp
index 7a68894..9c89eea 100644
--- a/bpfloader/BpfLoader.cpp
+++ b/bpfloader/BpfLoader.cpp
@@ -112,6 +112,7 @@ void createSysFsBpfSubDir(const char* const prefix) {
 }
 
 int main() {
+/*
     // Load all ELF objects, create programs and maps, and pin them
     for (const auto location : locations) {
         createSysFsBpfSubDir(location.prefix);
@@ -125,7 +126,7 @@ int main() {
             return 2;
         }
     }
-
+*/
     if (android::base::SetProperty("bpf.progs_loaded", "1") == false) {
         ALOGE("Failed to set bpf.progs_loaded property");
         return 1;
-- 
2.33.0

